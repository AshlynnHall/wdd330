<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Cart Functionality</title>
</head>
<body>
    <h1>Test Cart Functionality</h1>
    <button id="testAddToCart">Test Add to Cart</button>
    <button id="testGetCart">Test Get Cart</button>
    <button id="clearCart">Clear Cart</button>
    <div id="output"></div>

    <script type="module">
        import { getLocalStorage, setLocalStorage } from "./js/utils.mjs";

        const output = document.getElementById("output");

        document.getElementById("testAddToCart").addEventListener("click", () => {
            console.log("Testing add to cart");
            
            // Test product object
            const testProduct = {
                Id: "TEST123",
                Name: "Test Product",
                FinalPrice: "29.99",
                Image: "/images/test.jpg",
                Colors: [{ColorName: "Blue"}]
            };

            // Get existing cart items or start with an empty array
            let cartItems = getLocalStorage("so-cart") || [];
            console.log("Current cart:", cartItems);
            
            // Add the current product to the cart
            cartItems.push(testProduct);
            console.log("Updated cart:", cartItems);
            
            // Save the updated cart back to localStorage
            setLocalStorage("so-cart", cartItems);
            console.log("Cart saved");
            
            output.innerHTML = `<p>Added test product. Cart now has ${cartItems.length} items.</p>`;
        });

        document.getElementById("testGetCart").addEventListener("click", () => {
            const cartItems = getLocalStorage("so-cart");
            console.log("Cart items:", cartItems);
            output.innerHTML = `<p>Cart contents: ${JSON.stringify(cartItems, null, 2)}</p>`;
        });

        document.getElementById("clearCart").addEventListener("click", () => {
            localStorage.removeItem("so-cart");
            output.innerHTML = `<p>Cart cleared</p>`;
        });
    </script>
</body>
</html>
